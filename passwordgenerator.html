<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ortalamatör</title>
    <link rel="icon" href="static/images/vic32.png" type="image/png">
    <link rel="stylesheet" type="text/css" href="static/ortalamatorPWAstyles.css">
    <link rel="manifest" href="/ortalamatormanifest.json">
</head>
<body>
    <div class="title-section">
        <a href="/">
            <picture>
                <source srcset="/static/imageswebp/vicinti3.webp" type="image/webp">
                <img class="main-menu-button" src="/static/images/vicinti3.png">
            </picture>
        </a>
        <h1 class="main-menu-text">Ortalamatör</h1>
        <div class="project-buttons">
            <div class="category-button">
                <a href="/contactme">Contact Me</a>
            </div>
        </div>
    </div>
    <input type="text" id="password" readonly placeholder="Your Password">
    <button onclick="generatePassword()">Generate Password</button>
    <input type="number" id="passwordlength" placeholder="Password Length" value="12">
    <div>Lowercase</div>
    <input type="checkbox" id="ifLowercase">
    <div>Uppercase</div>
    <input type="checkbox" id="ifUppercase">
    <div>Numbers</div>
    <input type="checkbox" id="ifNumbers">
    <div>Symbols</div>
    <input type="checkbox" id="ifSymbols">
    <button id="checkAll" onclick="checkAll()">Check All</button>
    <button id="copyPassword" onclick="copyAll()">Copy Password</button>
</body>
<script>
    function checkAll() {
        let checkboxes = document.querySelectorAll('input[type="checkbox"]');
        let theButton = document.getElementById("checkAll");
        if (theButton.innerHTML == "Check All") {
            checkboxes.forEach(checkbox => checkbox.checked = true);
            theButton.innerText = "Uncheck All"
            console.log("1")

        } else if (theButton.innerHTML == "Uncheck All") {
            checkboxes.forEach(checkbox => checkbox.checked = false);
            theButton.innerText = "Check All"
            console.log("1") ;console.log("1")
        }
    }

    async function generatePassword() {
            let allCharacters;
            document.getElementById('password').value = "";

            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+[]{}|;:,.<>?`~\\/-=';            
            
            const checkbox1 = document.getElementById('ifLowercase').checked;
            const checkbox2 = document.getElementById('ifUppercase').checked;
            const checkbox3 = document.getElementById('ifNumbers').checked;
            const checkbox4 = document.getElementById('ifSymbols').checked;

            // ve ortalamatör CSS ve isminden çek

            if (!checkbox1 && !checkbox2 && !checkbox3 && !checkbox4) {
                alert("Please select at least one box.");
                return;
            }
            else if (document.getElementById("passwordlength").value > 100) {
                alert("Please generate a shorter password.");
                return;
            } else {
                if (checkbox1) {
                    allCharacters += lowercase;
                    console.log("1")
                }
                if (checkbox2) {
                    allCharacters += uppercase;
                    console.log("2")
                }
                if (checkbox3) {
                    allCharacters += numbers;
                    console.log("3")
                }
                if (checkbox4) {
                    allCharacters += symbols;
                    console.log("4")
                }           
            }

            for (i = 0; i < document.getElementById("passwordlength").value; i++) {
                const randomIndex = Math.floor(Math.random() * allCharacters.length);
                document.getElementById('password').value += allCharacters[randomIndex];
                await new Promise(resolve => setTimeout(resolve, 180));
            }
    }

    function copyAll() {
        document.getElementById("password").select();
        document.execCommand("copy");
        alert("Copied your password!");
    }
</script>