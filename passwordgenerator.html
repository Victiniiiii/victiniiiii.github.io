<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Password Generator</title>
		<link rel="icon" href="static/images/vic32.png" type="image/png" />
		<link rel="stylesheet" type="text/css" href="static/styles.css" media="screen and (min-width: 768px)" />
		<link rel="stylesheet" type="text/css" href="static/stylesmini.css" media="screen and (max-width: 767px)" />
	</head>
	<style>
		* {
			box-sizing: border-box;
			font-family: Verdana, Geneva, Tahoma, sans-serif;
		}

		.flexrow {
			display: flex;
			flex-direction: row;
		}

		@media (min-width: 768px) {
			#passwordBox {
				display: flex;
				flex-direction: column;
				width: 40vw;
				height: auto;
				margin: auto;
				margin-top: 10vh;
				background-color: rgb(0, 0, 0, 0.6);
				border: 1px solid white;
				padding: 2vw;
				border-radius: 1vw;
				color: white;
			}

			#passwordlength {
				margin-left: 1vw;
				transform: scale(1);
				-webkit-transform: scale(1);
				width: 3vw;
			}

			#password {
				width: 100%;
				height: 10vh;
				font-size: 4vh;
				border-radius: 18px;
			}

			#passwordSettings {
				display: grid;
				grid-template-columns: repeat(2, 1fr);
				grid-template-rows: repeat(3, 1fr);
				border: 1px solid white;
				margin: 2vh 0;
				border-radius: 18px;
			}

			#passwordSettings div {
				display: flex;
				align-items: center;
				justify-content: center;
			}

			#passwordSettings div input {
				margin-left: 2vw;
				transform: scale(1.5);
				-webkit-transform: scale(1.5);
			}

			#passwordButtons {
				display: flex;
				flex-direction: row;
				justify-content: space-between;
				border-radius: 18px;
				border: 1px solid aqua;
				font-size: 0.9em;
			}

			#passwordButtons button {
				width: 33.3333%;
				height: 3em;
				font-size: 1.5em;
				background-color: rgb(0, 100, 150, 0.6);
				border: none;
				color: white;
				transition: background-color 0.25s ease-in-out;
				cursor: pointer;
			}

			.passwordAllows {
				cursor: pointer;
				transition: background-color 0.25s ease-in-out;
			}

			#passwordButtons button:hover {
				background-color: rgb(0, 100, 150, 0.3);
			}

			#passwordButtons > *:nth-child(1) {
				border-top-left-radius: 18px;
				border-bottom-left-radius: 18px;
			}

			#passwordButtons > *:nth-child(3) {
				border-top-right-radius: 18px;
				border-bottom-right-radius: 18px;
			}

			#passwordSettings > *:nth-child(5) {
				border-bottom-left-radius: 18px;
			}

			#passwordSettings > *:nth-child(6) {
				border-bottom-right-radius: 18px;
			}
		}
		@media (max-width: 767px) {
			#passwordBox {
				display: flex;
				flex-direction: column;
				width: auto;
				height: auto;
				margin: auto;
				margin-top: 5vh;
				background-color: rgb(0, 0, 0, 0.6);
				border: 1px solid white;
				padding: 1vw;
				border-radius: 1vw;
				color: white;
			}

			#password {
				width: 100%;
				height: 10vh;
				font-size: 4vh;
			}

			#passwordlength {
				margin-left: 5vw;
				transform: scale(1);
				-webkit-transform: scale(1);
				width: 15vw;
			}

			#passwordSettings {
				display: grid;
				grid-template-columns: repeat(2, 1fr);
				grid-template-rows: repeat(3, 1fr);
			}

			#passwordSettings h1 {
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
			}

			#passwordButtons {
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.flexrow {
				display: flex;
				flex-direction: row;
				margin: 1vh;
				font-size: 1.5vh;
				align-items: center;
				justify-content: center;
				font-size: 1em;
			}

			.flexrow input {
				margin-left: 2vw;
				transform: scale(1.5);
				-webkit-transform: scale(1.5);
			}

			#passwordButtons button {
				width: 90%;
				height: 3em;
				font-size: 1.5em;
				background-color: rgb(0, 100, 150, 0.6);
				border: 1px solid aqua;
				color: white;
				transition: background-color 0.25s ease-in-out;
				margin: 0.5vh 0;
			}

			.passwordAllows {
				display: flex;
				align-items: center;
				justify-content: center;
				transition: background-color 0.25s ease-in-out;
			}
		}
	</style>
	<body>
		<header id="title-section">
			<a href="/">
				<picture>
					<source srcset="/static/imageswebp/vicinti3.webp" type="image/webp" />
					<img class="main-menu-button" src="/static/images/vicinti3.png" />
				</picture>
			</a>
			<h1 class="main-menu-text">Password Generator</h1>
			<div class="project-buttons">
				<div class="category-button">
					<a href="/contactme">Contact Me</a>
				</div>
			</div>
		</header>
		<div id="passwordBox">
			<input type="text" id="password" readonly placeholder="Generate a password!" />
			<div id="passwordSettings">
				<h1>Settings</h1>
				<div class="flexrow">
					<div>Password Length:</div>
					<input type="number" id="passwordlength" placeholder="Password Length" value="12" />
				</div>
				<div class="passwordAllows">
					<div>Allow Lowercase: ✔</div>
				</div>
				<div class="passwordAllows">
					<div>Allow Uppercase: ✔</div>
				</div>
				<div class="passwordAllows">
					<div>Allow Numbers: ✔</div>
				</div>
				<div class="passwordAllows">
					<div>Allow Symbols: ✔</div>
				</div>
			</div>
			<div id="passwordButtons">
				<button disabled id="copyPassword" onclick="copyAll()">Copy Password</button>
				<button id="checkAll" onclick="checkAll()">Check All</button>
				<button onclick="generatePassword()">Generate Password</button>
			</div>
		</div>
	</body>
	<script>
		let checks = [true, true, true, true];
		let theButton = document.getElementById("checkAll");
		let children = document.querySelectorAll("#passwordSettings > div");

		const lowercase = "abcdefghijklmnopqrstuvwxyz";
		const uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
		const numbers = "0123456789";
		const symbols = "!@#$%^&*()_+[]{}|;:,.<>?`~\\/-=";

		function checkCheckboxes() {
			children.forEach((child, index) => {
				child.innerHTML.includes("✔") ? (checks[index - 1] = true) : (checks[index - 1] = false);
				if (index === 0) {
					child.style.backgroundColor = "";
					child.onmouseover = null;
					child.onmouseout = null;
				} else {
					const isChecked = checks[index - 1];
					child.style.backgroundColor = isChecked ? "rgba(0,250,0,0.2)" : "rgba(250,0,0,0.2)";

					child.onmouseover = function () {
						this.style.backgroundColor = isChecked ? "rgba(0,250,0,0.3)" : "rgba(250,0,0,0.3)";
					};

					child.onmouseout = function () {
						this.style.backgroundColor = isChecked ? "rgba(0,250,0,0.2)" : "rgba(250,0,0,0.2)";
					};
				}
			});

			if (checks.every((value) => value === false)) {
				theButton.innerHTML = "Check All";
			} else if (checks.every((value) => value === true)) {
				theButton.innerHTML = "Uncheck All";
			}
		}

		document.querySelectorAll(".passwordAllows").forEach(function (div) {
			div.addEventListener("click", function () {
				let theText = div.innerHTML;
				div.innerHTML = theText.includes("✔") ? theText.replace("✔", "✖") : theText.replace("✖", "✔");
				checkCheckboxes();
			});
		});

		function checkAll() {
			if (theButton.innerHTML == "Check All") {
				checks.fill(true);
				children.forEach((child) => {
					child.innerHTML = child.innerHTML.includes("✔") ? child.innerHTML : child.innerHTML.replace("✖", "✔");
				});
				theButton.innerText = "Uncheck All";
			} else if (theButton.innerHTML == "Uncheck All") {
				checks.fill(false);
				children.forEach((child) => {
					child.innerHTML = child.innerHTML.includes("✔") ? child.innerHTML.replace("✔", "✖") : child.innerHTML;
				});
				theButton.innerText = "Check All";
			}
			checkCheckboxes();
		}

		async function generatePassword() {
			checkCheckboxes();
			let allCharacters = "";
			document.getElementById("password").value = "";

			if (checks.every((value) => value === false)) {
				alert("Please select at least one setting.");
				return;
			} else if (document.getElementById("passwordlength").value > 100) {
				alert("Please generate a shorter password.");
				return;
			} else {
				if (checks[0]) {
					allCharacters += lowercase;
				}
				if (checks[1]) {
					allCharacters += uppercase;
				}
				if (checks[2]) {
					allCharacters += numbers;
				}
				if (checks[3]) {
					allCharacters += symbols;
				}
			}

			for (i = 0; i < document.getElementById("passwordlength").value; i++) {
				const randomIndex = Math.floor(Math.random() * allCharacters.length);
				document.getElementById("password").value += allCharacters[randomIndex];
				await new Promise((resolve) => setTimeout(resolve, 2000 / document.getElementById("passwordlength").value));
			}
			document.getElementById("copyPassword").disabled = false;
		}

		function copyAll() {
			document.getElementById("password").select();
			document.execCommand("copy");
			alert("Copied your password!");
		}

		document.addEventListener("DOMContentLoaded", function () {
			checkAll();
		});
	</script>
</html>
