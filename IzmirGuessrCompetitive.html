<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="description" content="IzmirGuessr is a game where you try to find where you are based on a random location in Google Maps." />
		<meta name="robots" content="index, follow" />
		<meta name="author" content="Victiniiiii" />
		<title>IzmirGuessr Competitive</title>
		<link rel="icon" href="static/images/vic32.png" type="image/png" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
		<link rel="stylesheet" type="text/css" href="static/IzmirGuessrPWAStyles.css" />
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvjbX7ao3UbTO56SwG9IJ_KAXOtM5Guo4"></script>
		<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	</head>
	<style>
		#expandButton {
			width: auto;
			max-height: 50px;
			margin: auto 0.5vw auto 0;
			cursor: pointer;
			transition: 1.5s;
			overflow: hidden;
			z-index: 2;
		}

		.buttonInsideButton {
			width: auto;
			height: 50px;
			background-color: rgb(0, 0, 120, 0.8);
			font-size: 1.25em;
			padding-left: 10px;
			padding-right: 10px;
			text-align: center;
			line-height: 50px;
			color: white;
			display: block;
			border: 1px solid rgb(0, 0, 240);
		}

		#expandButton.expanded {
			max-height: 200px;
			transition: 1.5s;
			margin-top: calc(auto);
			z-index: 9995;
		}

		#changeUsernameModal {
			display: none;
			width: 80vw;
			height: 80vh;
			background-color: rgb(0, 0, 0, 0.8);
			margin: 10vh 10vw 10vh 10vw;
			position: fixed;
			z-index: 999999999999999999999999;
		}

		.modalTitleRow {
			width: 100%;
			height: 4vw;
			font-size: 3vw;
			color: white;
			display: flex;
			flex-direction: row;
			margin-bottom: 3vh;
		}

		.modalTitle {
			width: 76vw;
			height: 100%;
			font-weight: bold;
			padding-left: 4vw;
		}

		.modalCloseButton {
			width: 4vw;
			height: 100%;
			cursor: pointer;
		}

		#changeUsernameModalBox {
			color: white;
		}

		#menubuttons button {
			width: calc(100% + 1vw);
			font-size: 1.75em;
			background-color: rgb(0, 0, 0, 0.8);
			color: white;
			border-radius: 1vw;
		}

		.blur {
			-webkit-backdrop-filter: blur(10px);
			backdrop-filter: blur(10px);
			width: 100%;
			height: 100%;
		}

		#selectGameMode,
		#roundCount {
			width: auto;
			height: 4.3dvh;
			line-height: 4.3dvh;
			margin: 1.1dvh 0.5vw 0 0.5vw;
			background-color: rgb(0, 0, 0, 0.8);
			color: white;
			font-size: min(1.25vw, 2.5dvh);
			border-radius: 1vh;
			padding: 0 1em 0 1em;
		}

		.modalClose {
			color: #aaa;
			float: right;
			font-size: 3vw;
			font-weight: bold;
			cursor: pointer;
			margin-right: 1vw;
		}

		#competitiveChecks {
			width: 30vw;
			height: calc(100% - 3vw);
			display: flex;
			flex-direction: column;
			color: white;
			text-shadow: 2px 2px 2px black;
			font-size: 1vw;
			text-align: left;
			padding: 0 0 2vw 2vw;
			line-height: 2.3vw;
			background: rgb(0, 0, 0, 0.4);
			border: 1px solid black;
			margin: 0 0 1vw 1vw;
		}

		#menuarabox {
			width: 43vw;
			height: 30%;
			display: flex;
			flex-direction: column;
			align-items: center;
			color: white;
			text-shadow: 2px 2px 2px black;
			margin: 1vw;
		}

		#menuaraboxfirst {
			width: 100%;
			height: 80%;
			display: flex;
			flex-direction: row;
			border: 1px solid black;
			align-items: center;
		}

		#miniLeaderboard,
		#yourStats {
			width: 50%;
			height: 100%;
			display: flex;
			flex-direction: column;
			justify-content: flex-start;
			align-items: center;
			background: rgb(0, 0, 0, 0.4);
		}

		#menusettings {
			width: 100%;
			height: 20%;
			border: 1px solid black;
			display: flex;
			align-items: center;
			justify-content: center;
			background: rgb(0, 0, 0, 0.4);
		}

        #gameplayBackground {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgb(0, 0, 0) 0%, rgba(0, 0, 0, 0.875) 100%);
            position: fixed;
            z-index: 0;
            display: none;
        }

        #backgroundText {
            position: absolute;
            width: 20vw;
            height: 20vh;
            margin: 40vh 40vw 40vh 40vw;
            color: white;
            font-size: 1.5vw;
        }

        #loadingScreen {
            display: none;
            position: fixed;
            width: 100dvw;
            height: 100dvh;
            color: white;
            background: black;
            align-items: center;
            text-align: center;
            justify-content: center;
            font-size: 5vw;
            z-index: 7543666666666666666666666666668345762345782364592873465298376458923756492384562983756289374569823746589237645892364985697;
        }
	</style>
	<body>
		<header id="title-section">
			<a href="/">
				<picture>
					<source srcset="/static/imageswebp/vicinti3.webp" type="image/webp" />
					<img class="main-menu-button" src="/static/images/vicinti3.png" />
				</picture>
			</a>
			<h1 class="main-menu-text">IzmirGuessr Competitive</h1>
			<div id="expandButton">
				<div class="buttonInsideButton" id="usernameHere">Logging in...</div>
				<div class="buttonInsideButton" id="secondButton">Login with Google</div>
				<div class="buttonInsideButton" id="thirdButton">Change Nickname</div>
				<div class="buttonInsideButton"><a href="/contactme">Contact Me</a></div>
			</div>
		</header>

		<div id="startpage" class="startpage">
			<div id="startpagelefthalf" class="startpagelefthalf">
				<div id="map2"></div>
				<div id="mainMapInfo">
					<button id="addAll-button" class="addremovebuttons" onclick="addAllDistricts()">Add All</button>
					<button id="removeAll-button" class="addremovebuttons" onclick="removeAllDistricts()">Remove All</button>
					<p id="ilcesayisi" class="ilcesayisi">Current District Count: 30</p>
				</div>
			</div>
			<div id="startpagerighthalf">
				<div class="blur">
					<div id="izmirilcebox">
						<button onclick="toggleDistrict('Aliağa')">Aliağa</button>
						<button onclick="toggleDistrict('Balçova')">Balçova</button>
						<button onclick="toggleDistrict('Bayındır')">Bayındır</button>
						<button onclick="toggleDistrict('Bayraklı')">Bayraklı</button>
						<button onclick="toggleDistrict('Bergama')">Bergama</button>
						<button onclick="toggleDistrict('Beydağ')">Beydağ</button>
						<button onclick="toggleDistrict('Bornova')">Bornova</button>
						<button onclick="toggleDistrict('Buca')">Buca</button>
						<button onclick="toggleDistrict('Çeşme')">Çeşme</button>
						<button onclick="toggleDistrict('Çiğli')">Çiğli</button>
						<button onclick="toggleDistrict('Dikili')">Dikili</button>
						<button onclick="toggleDistrict('Foça')">Foça</button>
						<button onclick="toggleDistrict('Gaziemir')">Gaziemir</button>
						<button onclick="toggleDistrict('Güzelbahçe')">Güzelbahçe</button>
						<button onclick="toggleDistrict('Karabağlar')">Karabağlar</button>
						<button onclick="toggleDistrict('Karaburun')">Karaburun</button>
						<button onclick="toggleDistrict('Karşıyaka')">Karşıyaka</button>
						<button onclick="toggleDistrict('Kemalpaşa')">Kemalpaşa</button>
						<button onclick="toggleDistrict('Kınık')">Kınık</button>
						<button onclick="toggleDistrict('Kiraz')">Kiraz</button>
						<button onclick="toggleDistrict('Konak')">Konak</button>
						<button onclick="toggleDistrict('Menderes')">Menderes</button>
						<button onclick="toggleDistrict('Menemen')">Menemen</button>
						<button onclick="toggleDistrict('Narlıdere')">Narlıdere</button>
						<button onclick="toggleDistrict('Ödemiş')">Ödemiş</button>
						<button onclick="toggleDistrict('Seferihisar')">Seferihisar</button>
						<button onclick="toggleDistrict('Selçuk')">Selçuk</button>
						<button onclick="toggleDistrict('Tire')">Tire</button>
						<button onclick="toggleDistrict('Torbalı')">Torbalı</button>
						<button onclick="toggleDistrict('Urla')">Urla</button>
					</div>
					<div id="menuarabox">
						<div id="menuaraboxfirst">
							<div id="miniLeaderboard">
								<h1>Leaderboard</h1>
							</div>
							<div id="yourStats">
								<h1>Your Stats:</h1>
								<p id="statsPlayedRounds">Played Rounds: 0</p>
								<p id="statsPercentages">Success Percentage: 0.00%</p>
								<p id="statsHighScore">Best High Score: 0</p>
							</div>
						</div>
						<div id="menusettings">
							<p>Game Settings will go here...</p>
						</div>
					</div>
					<div id="mainmenuCompetitiveChecksAndButtons">
						<div id="competitiveChecks">Loading...</div>
						<div id="menubuttons">
							<button id="gamesettings">Settings</button>
							<button id="leaderboards" onclick="openmodal('leaderboardMenu')">Leaderboards</button>
							<button id="stats" onclick="openmodal('statsMenu')">Statistics</button>
							<button id="izmirfaq" class="izmirfaq" onclick="openmodal('faqMenu')">How to Play</button>
							<button id="start-button3" class="izmirstartgame" onclick="startGame()">Start Game</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="gameplayBackground">
            <div id="backgroundText">testText</div>
			<div id="gamemap"></div>
			<div id="overlay-container">
				<div id="mini-map"></div>
				<button id="action-button">Confirm & Calculate</button>
			</div>
			<div id="result-modal" class="modal">
				<div id="result-map" class="result-map"></div>
				<div class="modalrow">
					<p id="distance-info" class="modalcontent"></p>
					<p id="points-info" class="modalcontent"></p>
				</div>
				<div class="modalrow">
					<p id="totalPoints" class="modalcontent"></p>
					<div class="modalcontent">
						<button id="next-game-button" class="next-game-button" onclick="startGame()">Next Game</button>
					</div>
				</div>
			</div>
			<div id="buttonrow" class="buttonrow">
				<div id="closeandreturn">
					<div id="izmirclose" onclick="returnToMainMenu()"></div>
					<div id="returnbutton" onclick="returnToStart()"></div>
					<div id="alarmicon"></div>
					<div id="timer">Remaining: 30 Seconds</div>
				</div>
				<div id="selectGameMode"></div>
				<div id="roundCount"></div>
				<div id="modaltoggle-button" onclick="toggleModal()">Toggle</div>
			</div>
			<div id="final-results-modal">
				<div class="finalrow">
					<p class="modalcontent">Congratulations!</p>
				</div>
				<div class="finalrow">
					<p id="totalPoints2" class="modalcontent"></p>
				</div>
				<div class="finalrow">
					<p class="modalcontent">Play Again?</p>
				</div>
				<div class="finalrow">
					<button id="returntomenu-button" class="modalcontent" onclick="returnToMainMenu()">Return to Main Menu</button>
					<button id="playagain-button" class="modalcontent" onclick="playAgain()">Play Again</button>
				</div>
			</div>
		</div>

		<div class="menumodal" id="faqMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">How to play this game ?</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<p>When you start up the game you will spawn in a random street in Izmir, if you have selected districts the playzone will be restricted to those districts, and you have to guess where you are based on your surroundings. You need to mark your guess in the small map in the bottom right, and you will get points depending on how close your guess is to the original destination. Have fun !</p>
		</div>
		<div class="menumodal" id="statsMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Statistics</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<button onclick="logStatistics()">Click here to get your statistics.</button>
			<p id="statisticsMenuText"></p>
		</div>
		<div class="menumodal" id="leaderboardMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Leaderboard</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<p>Disclaimer: You need at least 100 points to qualify for the leaderboard.</p>
			<p>This leaderboard will show top 10 for each district, but it's not ready yet.</p>
		</div>
		<div class="menumodal" id="changeUsernameModal">
			<div class="modalTitleRow">
				<div class="modalTitle">Change Nickname</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<input id="changeUsernameInput" type="text" aria-label="usernameinput" />
			<button onclick="changeNickname()">Change</button>
		</div>
        <div id="loadingScreen">Loading...</div>

		<script src="badwords.js"></script>
		<script type="module" src="IzmirGuessrFirebase.js"></script>
		<script src="IzmirGuessrMapOptions.js"></script>
		<script src="IzmirGuessrCoordinates.js"></script>
		<script src="IzmirGuessrCompetitive.js"></script>
	</body>
</html>
