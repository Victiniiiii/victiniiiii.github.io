<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="description" content="IzmirGuessr is a game where you try to find where you are based on a random location in Google Maps." />
		<meta name="robots" content="index, follow" />
		<meta name="author" content="Victiniiiii" />
		<meta property="og:title" content="IzmirGuessr Competitive" />
		<meta property="og:description" content="IzmirGuessr is a game where you explore Izmir and break high scores!" />
		<meta property="og:image" content="https://victiniiiii.github.io/static/imageswebp/izmirguessrlogo.webp" />
		<meta property="og:url" content="https://victiniiiii.github.io/IzmirGuessrCompetitive" />
		<meta property="og:type" content="website" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="IzmirGuessr Competitive" />
		<meta name="twitter:description" content="IzmirGuessr is a game where you explore Izmir and break high scores!" />
		<meta name="twitter:image" content="https://victiniiiii.github.io/static/imageswebp/izmirguessrlogo.webp" />
		<meta name="twitter:url" content="https://victiniiiii.github.io/IzmirGuessrCompetitive" />
		<title>IzmirGuessr Competitive</title>
		<link rel="icon" href="static/images/vic32.png" type="image/png" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
		<link rel="stylesheet" type="text/css" href="static/IzmirGuessrPWAStyles.css" />
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3-anws9NARfKArTUZbtfJN9jKrQKIbwM"></script>
		<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	</head>
	<body>
		<header id="title-section">
			<a href="/">
				<picture>
					<source srcset="/static/imageswebp/vicinti3.webp" type="image/webp" />
					<img class="main-menu-button" src="/static/images/vicinti3.png" />
				</picture>
			</a>
			<h1 class="main-menu-text">IzmirGuessr Competitive</h1>
			<div id="expandButton">
				<div class="buttonInsideButton" id="usernameHere">Logging in...</div>
				<div class="buttonInsideButton" id="secondButton">Login with Google</div>
				<div class="buttonInsideButton" id="thirdButton">Change Nickname</div>
				<div class="buttonInsideButton"><a href="/contactme">Contact Me</a></div>
			</div>
		</header>

		<div id="startpage">
			<div id="startpagelefthalf">
				<div id="map2"></div>
				<div id="mainMapInfo">
					<label for="mapModeSelector">Select Map Mode:</label>
					<select id="mapModeSelector" onchange="switchMainMenuMapType()">
						<option value="DistrictBorders">District Borders</option>
						<option value="GameBorders">Game Borders</option>
						<option value="CityCenterBorders">District Center Borders</option>
						<option value="YourPerformance">Your Performance</option>
						<option value="Leaderboard">Leaderboard</option>
					</select>
				</div>
			</div>
			<div id="startpagerighthalf">
				<div class="blur">
					<div id="izmirilcebox">
						<button onclick="toggleDistrict('Aliağa')">Aliağa</button>
						<button onclick="toggleDistrict('Balçova')">Balçova</button>
						<button onclick="toggleDistrict('Bayındır')">Bayındır</button>
						<button onclick="toggleDistrict('Bayraklı')">Bayraklı</button>
						<button onclick="toggleDistrict('Bergama')">Bergama</button>
						<button onclick="toggleDistrict('Beydağ')">Beydağ</button>
						<button onclick="toggleDistrict('Bornova')">Bornova</button>
						<button onclick="toggleDistrict('Buca')">Buca</button>
						<button onclick="toggleDistrict('Çeşme')">Çeşme</button>
						<button onclick="toggleDistrict('Çiğli')">Çiğli</button>
						<button onclick="toggleDistrict('Dikili')">Dikili</button>
						<button onclick="toggleDistrict('Foça')">Foça</button>
						<button onclick="toggleDistrict('Gaziemir')">Gaziemir</button>
						<button onclick="toggleDistrict('Güzelbahçe')">Güzelbahçe</button>
						<button onclick="toggleDistrict('Karabağlar')">Karabağlar</button>
						<button onclick="toggleDistrict('Karaburun')">Karaburun</button>
						<button onclick="toggleDistrict('Karşıyaka')">Karşıyaka</button>
						<button onclick="toggleDistrict('Kemalpaşa')">Kemalpaşa</button>
						<button onclick="toggleDistrict('Kınık')">Kınık</button>
						<button onclick="toggleDistrict('Kiraz')">Kiraz</button>
						<button onclick="toggleDistrict('Konak')">Konak</button>
						<button onclick="toggleDistrict('Menderes')">Menderes</button>
						<button onclick="toggleDistrict('Menemen')">Menemen</button>
						<button onclick="toggleDistrict('Narlıdere')">Narlıdere</button>
						<button onclick="toggleDistrict('Ödemiş')">Ödemiş</button>
						<button onclick="toggleDistrict('Seferihisar')">Seferihisar</button>
						<button onclick="toggleDistrict('Selçuk')">Selçuk</button>
						<button onclick="toggleDistrict('Tire')">Tire</button>
						<button onclick="toggleDistrict('Torbalı')">Torbalı</button>
						<button onclick="toggleDistrict('Urla')">Urla</button>
					</div>
					<div id="pcRowMobileColumn">
						<div class="flexrow">
							<button class="addremovebuttons" onclick="addAllDistricts()">Add All</button>
							<button class="addremovebuttons" onclick="removeAllDistricts()">Remove All</button>
						</div>
						<p id="menuTip"></p>
					</div>
					<div id="menuarabox">
						<div id="miniLeaderboard">
							<h1>Leaderboard</h1>
						</div>
						<div id="yourStats">
							<h1>Your Stats</h1>
							<p>&nbsp;</p>
							<p id="statsHighScore">Best High Score: 0</p>
							<p id="statsPlayedGames">Played Games: 0</p>
							<p id="statsPlayedRounds">Played Rounds: 0</p>
							<p id="statsPercentages">Success Percentage: 0.00%</p>
							<p id="statsUniqueDistricts">Unique Districts Played: 0</p>
						</div>
					</div>
					<div id="mainmenuCompetitiveChecksAndButtons">
						<button id="matchHistory" onclick="openmodal('matchHistoryMenu')">Match History</button>
						<button id="leaderboards" onclick="openmodal('leaderboardMenu')">Leaderboards</button>
						<button id="stats" onclick="openmodal('statsMenu')">Statistics</button>
						<button onclick="showModalPage(0)">Tutorial</button>
						<button onclick="openmodal('faqMenu')">FAQ</button>
						<button id="playMenuButton" onclick="openmodal('playMenu')">Play</button>
					</div>
				</div>
			</div>
		</div>

		<div id="gameplayBackground">
			<div id="backgroundText"></div>
			<div id="minimapOpenButton" onclick="minimapOpenButton()">
				<img src="icons/minimapbutton.svg" alt="Minimap Button" />
			</div>
			<div id="gamemap"></div>
			<div id="overlay-container">
				<div id="mini-map"></div>
				<div id="minimapButtons">
					<div id="action-button">Confirm & Calculate</div>
					<div id="minimapCloseButton" onclick="minimapCloseButton()">Close</div>
				</div>
			</div>
			<div id="result-modal">
				<div id="resultModalTop">
					<div id="resultModalLeft"></div>
					<div id="result-map"></div>
					<div id="resultModalRight"></div>
				</div>
				<div id="resultModalBottom">
					<div class="flexrow">
						<p id="distance-info"></p>
						<p id="points-info"></p>
						<p id="totalPoints"></p>
					</div>
					<div class="flexrow">
						<button id="returntomenu-button" onclick="returnToMainMenu()">Return to Main Menu</button>
						<button id="shareMatch" onclick="copyMatchSharingCode()">Copy Match Code</button>
						<button id="startGameButton" disabled onclick="startGame()">Next Game</button>
					</div>
				</div>
			</div>
			<div id="buttonrow">
				<div title="Return to Main Menu" id="izmirclose" onclick="returnToMainMenu()"></div>
				<div id="alarmicon"></div>
				<div id="timer">Remaining: 30 Seconds</div>
				<div id="selectGameMode"></div>
				<div id="roundCount"></div>
				<div id="modaltoggle-button"></div>
			</div>
		</div>

		<div class="menumodal" id="faqMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">How to play this game ?</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div class="modalContent flexcolumn">
				<div class="faq-container">
					<div class="faq">
						<div class="faq-question">
							What is this game?
							<span class="arrow">&#9660;</span>
						</div>
						<div class="faq-answer">When you start up the game you will spawn in a random street in Izmir, if you have selected districts the playzone will be restricted to those districts, and you have to guess where you are based on your surroundings. You need to mark your guess in the small map in the bottom right, and you will get points depending on how close your guess is to the original destination. Have fun!</div>
					</div>
					<div class="faq">
						<div class="faq-question">
							Why should I login?
							<span class="arrow">&#9660;</span>
						</div>
						<div class="faq-answer">You can login with your Google without using a password to save your statistics, get on the leaderboard and check your match history between multiple devices for free.</div>
					</div>
					<div class="faq">
						<div class="faq-question">
							What are the differences from the original IzmirGuessr?
							<span class="arrow">&#9660;</span>
						</div>
						<div class="faq-answer">
							<p>The differences from the original game are:</p>
							<ul>
								<li>New design, backend and score maps</li>
								<li>Dark mode</li>
								<li>Harder difficulties</li>
								<li>Cleaner code</li>
								<li>Toggleable minimap</li>
								<li>More precise coordinates</li>
								<li>Ability to check coordinates after game</li>
								<li>User system</li>
								<li>Quicker matchmaking</li>
								<li>Match history</li>
								<li>Sharing played games</li>
								<li>District centers game mode</li>
							</ul>
						</div>
					</div>
					<div class="faq">
						<div class="faq-question">
							What are the plans for the future of the game?
							<span class="arrow">&#9660;</span>
						</div>
						<div class="faq-answer">
							<p>These are the current plans:</p>
							<ul>
								<li>2 Language support (TR - ENG)</li>
								<li>Complete the decorative map in the main screen</li>
								<li>If you want to suggest new changes, please contact me.</li>
							</ul>
						</div>
					</div>
					<div class="faq">
						<div class="faq-question">
							How are the scores calculated?
							<span class="arrow">&#9660;</span>
						</div>
						<div class="faq-answer">
							<p>This is the function I use to calculate scores:</p>
							<code>-1.35166e-9 * Math.pow(distance, 3) + 0.0000310415 * Math.pow(distance, 2) - 0.278563 * distance + 1033.48</code>
							<p>This is a special curved function I made to give the player more points when close to target, but still give some points when it's not that close.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="menumodal" id="statsMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Statistics</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div class="modalContent">
				<div class="modalLeft">
					<p id="statisticsMenuText">Disclaimer: Data of the games played in Every District and Custom settings are counted for both those and the original district.</p>
				</div>
				<div class="modalRight">
					<button class="coolButton firebaseButton" onclick="logStatistics()">Click here to get your statistics.</button>
					<button class="coolButton" onclick="sortStatistics('highscores')">Sort by High Scores</button>
					<button class="coolButton" onclick="sortStatistics('gamesplayed')">Sort by Games Played</button>
					<button class="coolButton" onclick="sortStatistics('roundsplayed')">Sort by Rounds Played</button>
					<button class="coolButton" onclick="sortStatistics('successpercentage')">Sort by Success Percentage</button>
				</div>
			</div>
		</div>
		<div class="menumodal" id="matchHistoryMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Match History</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div class="modalContent">
				<div class="modalLeft">
					<div id="modalMatchHistory"></div>
				</div>
				<div class="modalRight">
					<button class="coolButton firebaseButton" onclick="loadMatchHistory()">Load Match History</button>
				</div>
			</div>
		</div>
		<div class="menumodal" id="leaderboardMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Leaderboard</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div class="modalContent">
				<div class="modalLeft">
					<div id="modalHighScores">Disclaimer: You need at least 2500 points to qualify for the leaderboard.</div>
				</div>
				<div class="modalRight">
					<select class="coolButton" name="izmirDistricts" id="izmirDistrictSelect">
						<option value="Every District">Every District</option>
						<option value="Custom">Custom</option>
						<option value="Aliağa">Aliağa</option>
						<option value="Balçova">Balçova</option>
						<option value="Bayındır">Bayındır</option>
						<option value="Bayraklı">Bayraklı</option>
						<option value="Bergama">Bergama</option>
						<option value="Beydağ">Beydağ</option>
						<option value="Bornova">Bornova</option>
						<option value="Buca">Buca</option>
						<option value="Çeşme">Çeşme</option>
						<option value="Çiğli">Çiğli</option>
						<option value="Dikili">Dikili</option>
						<option value="Foça">Foça</option>
						<option value="Gaziemir">Gaziemir</option>
						<option value="Güzelbahçe">Güzelbahçe</option>
						<option value="Karabağlar">Karabağlar</option>
						<option value="Karaburun">Karaburun</option>
						<option value="Karşıyaka">Karşıyaka</option>
						<option value="Kemalpaşa">Kemalpaşa</option>
						<option value="Kınık">Kınık</option>
						<option value="Kiraz">Kiraz</option>
						<option value="Konak">Konak</option>
						<option value="Menderes">Menderes</option>
						<option value="Menemen">Menemen</option>
						<option value="Narlıdere">Narlıdere</option>
						<option value="Ödemiş">Ödemiş</option>
						<option value="Seferihisar">Seferihisar</option>
						<option value="Selçuk">Selçuk</option>
						<option value="Tire">Tire</option>
						<option value="Torbalı">Torbalı</option>
						<option value="Urla">Urla</option>
					</select>
					<button class="coolButton firebaseButton" onclick="leaderboardModal()">Show</button>
				</div>
			</div>
		</div>
		<div class="menumodal" id="changeUsernameModal">
			<div class="modalTitleRow">
				<div class="modalTitle">Change Nickname</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<input id="changeUsernameInput" type="text" placeholder="Enter new username here..." aria-label="usernameinput" />
			<button class="coolButton firebaseButton" onclick="changeNickname()">Change</button>
		</div>
		<div class="menumodal" id="playMenu">
			<div class="modalTitleRow">
				<div class="modalTitle">Play</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div class="modalContent">
				<div class="modalLeft">
					<h1 id="gameModeName">Standard Gamemode</h1>
					<p>&nbsp;</p>
					<p>&nbsp;</p>
					<p>&nbsp;</p>
					<p id="sharedOff2">To experience the different districts, you can toggle on the ones you want, and toggle off the ones you find boring. They can be toggled either on clicking on the map, or clicking the district names in the main menu. You currently have <b id="ilcesayisi">30</b> districts selected.</p>
					<p>&nbsp;</p>
					<div id="settingsBox" style="display: flex; flex-direction: column; justify-content: center; align-items: center">
						<h2>Settings:</h2>
						<p>&nbsp;</p>
						<div id="sharedOff" style="display: flex; flex-direction: column; width: fit-content; justify-content: center; align-items: center">
							<div class="flexrow" style="width: fit-content; justify-content: center">
								<label for="roundLimitSelector">Set Round Limit:</label>
								<select id="roundLimitSelector" onchange="saveRoundLimit()">
									<option value="3">3</option>
									<option value="5">5</option>
									<option value="10">10</option>
								</select>
							</div>
							<p id="roundThisLong" style="width: fit-content; justify-content: center">The games will last 5 rounds long.</p>
							<p>&nbsp;</p>
							<div class="flexrow" style="width: fit-content; justify-content: center">
								<label for="gameModeSelector" class="gameModeSelectorLabel">Select Map:</label>
								<select id="gameModeSelector" onchange="saveGameMode()">
									<option value="Classic">Classic</option>
									<option value="DistrictCenters">District Centers</option>
								</select>
							</div>
							<p>District Centers map excludes roads and places too far from each districts center.</p>
							<p>&nbsp;</p>
						</div>
						<div class="flexrow" style="width: fit-content; justify-content: center">
							<label for="matchSharingLabel">Game Mode</label>
							<select id="matchSharingLabel" onchange="toggleGameMode()">
								<option value="Normal">Normal</option>
								<option value="Shared">Shared</option>
							</select>
						</div>
						<p id="sharedOff3" style="width: fit-content; justify-content: center">For the game mode, you can select "Shared" if you have a game code you would like to play.</p>
						<div id="sharedOn" style="display: none; flex-direction: column; width: fit-content; justify-content: center">
							<p>&nbsp;</p>
							<p>If you have a game code, you can play that game by pasting it here.</p>
							<p>&nbsp;</p>
							<p>Playing shared games do not count for statistics or the leaderboard.</p>
							<p>&nbsp;</p>
							<input id="matchSharingCodeInput" type="text" placeholder="Enter game code here..." aria-label="usernameinput" />
						</div>
					</div>
					<p>&nbsp;</p>
					<p>&nbsp;</p>
					<p>&nbsp;</p>
					<button id="mainStartButton" disabled onclick="startGameButton()">Start a new game</button>
				</div>
			</div>
		</div>
		<div id="wantTutorial">
			<div id="wantTutorial2">
				Would you like to see a short tutorial?
				<div id="wantTutorialButtons">
					<button onclick="setTutorial(2)">Later</button>
					<button onclick="setTutorial(1)">Yes</button>
					<button onclick="setTutorial(0)">No</button>
				</div>
			</div>
		</div>
		<div class="menumodal" id="tutorialModal">
			<div style="margin-bottom: 0 !important" class="modalTitleRow">
				<div class="modalTitle">Tutorial</div>
				<div class="modalCloseButton">&#10006;</div>
			</div>
			<div style="height: calc(80dvh - 4vw) !important" class="modalContent">
				<div class="modalPages-container">
					<div class="modalPages-sidebar">
						<ul id="modalPages-pageList"></ul>
					</div>
					<div class="modalPages-main">
						<div id="modalPages-pagesContainer"></div>
						<div class="modalPages-nav">
							<button id="modalPages-prevBtn">Previous Page</button>
							<button id="modalPages-nextBtn">Next Page</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="loadingScreen">Loading...</div>

		<script type="module" src="IzmirGuessrFirebase.js"></script>
		<script src="IzmirGuessrMapOptions.js"></script>
		<script src="IzmirGuessrCompetitive.js"></script>
	</body>
</html>
